<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>RafÄ±k'Ä±n Kafe Ä°ÅŸletmesi ğŸ”</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #2c3e50;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0;
            padding: 20px;
            height: 100vh;
            overflow: hidden;
        }

        h1 { margin-top: 0; text-shadow: 2px 2px #000; }

        /* Ãœst Bilgi Paneli */
        #stats-bar {
            background: #34495e;
            padding: 15px;
            border-radius: 10px;
            display: flex;
            gap: 20px;
            width: 800px;
            justify-content: space-around;
            font-size: 1.2em;
            border: 2px solid #f1c40f;
            margin-bottom: 10px;
        }

        /* Oyun AlanÄ± ve MenÃ¼ Konteyner */
        #game-container {
            display: flex;
            gap: 20px;
        }

        /* Oyun AlanÄ± (KuÅŸ BakÄ±ÅŸÄ± Grid) */
        #grid-map {
            display: grid;
            grid-template-columns: repeat(10, 50px);
            grid-template-rows: repeat(10, 50px);
            gap: 2px;
            background-color: #95a5a6; /* Zemin Rengi */
            border: 5px solid #7f8c8d;
            padding: 5px;
        }

        .cell {
            width: 50px;
            height: 50px;
            background-color: #ecf0f1; /* BoÅŸ fayans */
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            cursor: pointer;
            user-select: none;
            transition: background 0.2s;
        }

        .cell:hover { background-color: #bdc3c7; }
        
        /* Dolu hÃ¼cre animasyonu */
        .occupied { animation: pop 0.3s ease; }

        /* SaÄŸ MenÃ¼ (DÃ¼kkan) */
        #shop-menu {
            background: #ecf0f1;
            color: #2c3e50;
            padding: 20px;
            border-radius: 10px;
            width: 250px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .shop-btn {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: 0.2s;
        }

        .shop-btn:hover { background: #c0392b; transform: scale(1.02); }
        .shop-btn.active { background: #27ae60; border: 2px solid #f1c40f; }

        @keyframes pop {
            0% { transform: scale(0.5); }
            100% { transform: scale(1); }
        }

        /* MÃ¼ÅŸteri Animasyonu */
        .customer {
            position: absolute;
            font-size: 20px;
            animation: eat 3s infinite;
        }
        
        @keyframes eat {
            0% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
            100% { transform: translateY(0); }
        }
    </style>
</head>
<body>

    <h1>ğŸ” Kafe Tycoon: KuÅŸ BakÄ±ÅŸÄ±</h1>

    <div id="stats-bar">
        <span>ğŸ’° Bakiye: <b id="money">500</b> TL</span>
        <span>ğŸ‘¥ MÃ¼ÅŸteriler: <b id="customers">0</b></span>
        <span>â­ PopÃ¼lerlik: <b id="popularity">0</b></span>
    </div>

    <div id="game-container">
        <div id="grid-map"></div>

        <div id="shop-menu">
            <h3>ğŸ›’ Market</h3>
            <p style="font-size:0.8em; color:#7f8c8d;">Ã–nce malzemeyi seÃ§, sonra haritaya tÄ±kla.</p>
            
            <button class="shop-btn" onclick="selectItem('table', 100, 'ğŸª‘', 0)">
                <span>ğŸª‘ Masa</span> <span>100 TL</span>
            </button>
            
            <button class="shop-btn" onclick="selectItem('burger', 300, 'ğŸ”', 5)">
                <span>ğŸ” Burger OcaÄŸÄ±</span> <span>300 TL</span>
            </button>
            
            <button class="shop-btn" onclick="selectItem('pizza', 400, 'ğŸ•', 8)">
                <span>ğŸ• Pizza FÄ±rÄ±nÄ±</span> <span>400 TL</span>
            </button>

            <button class="shop-btn" onclick="selectItem('pasta', 350, 'ğŸ', 6)">
                <span>ğŸ Makarna Tezg.</span> <span>350 TL</span>
            </button>

            <button class="shop-btn" onclick="selectItem('cake', 200, 'ğŸ°', 4)">
                <span>ğŸ° Pasta DolabÄ±</span> <span>200 TL</span>
            </button>

            <button class="shop-btn" onclick="selectItem('vending', 500, 'ğŸ°', 10)">
                <span>ğŸ° Otomat</span> <span>500 TL</span>
            </button>

            <button class="shop-btn" style="background:#95a5a6;" onclick="selectItem('delete', 0, '', 0)">
                <span>âŒ Silgi</span> <span>0 TL</span>
            </button>
        </div>
    </div>

    <script>
        // --- Oyun DeÄŸiÅŸkenleri ---
        let money = 500;
        let popularity = 0; // Mutfak eÅŸyalarÄ± popÃ¼lerliÄŸi artÄ±rÄ±r
        let customerCount = 0;
        let maxCustomers = 0; // Masa sayÄ±sÄ± belirler
        
        let selectedItem = null; // Åu an seÃ§ili olan eÅŸya
        
        // Izgara Boyutu 10x10
        const rows = 10;
        const cols = 10;
        const gridMap = document.getElementById('grid-map');

        // EÅŸya VeritabanÄ±
        const items = {
            'table': { price: 100, icon: 'ğŸª‘', type: 'seat' },
            'burger': { price: 300, icon: 'ğŸ”', type: 'kitchen', income: 15 },
            'pizza': { price: 400, icon: 'ğŸ•', type: 'kitchen', income: 20 },
            'pasta': { price: 350, icon: 'ğŸ', type: 'kitchen', income: 18 },
            'cake': { price: 200, icon: 'ğŸ°', type: 'kitchen', income: 10 },
            'vending': { price: 500, icon: 'ğŸ°', type: 'passive', income: 25 },
            'delete': { price: 0, icon: '', type: 'tool' }
        };

        // --- HaritayÄ± OluÅŸtur ---
        let mapData = []; // HÃ¼crelerin durumunu tutar

        function initMap() {
            gridMap.innerHTML = '';
            mapData = [];
            for (let i = 0; i < rows * cols; i++) {
                let cell = document.createElement('div');
                cell.classList.add('cell');
                cell.dataset.index = i;
                cell.onclick = () => placeItem(cell, i);
                gridMap.appendChild(cell);
                
                mapData.push({ type: 'empty', content: null });
            }
        }
        initMap();

        // --- Market Ä°ÅŸlemleri ---
        function selectItem(key, price, icon, income) {
            selectedItem = { key, price, icon, income };
            
            // Buton gÃ¶rsel gÃ¼ncelleme
            document.querySelectorAll('.shop-btn').forEach(btn => btn.classList.remove('active'));
            event.currentTarget.classList.add('active');
        }

        function placeItem(cell, index) {
            if (!selectedItem) {
                alert("LÃ¼tfen marketten bir eÅŸya seÃ§!");
                return;
            }

            // Silme iÅŸlemi
            if (selectedItem.key === 'delete') {
                if (mapData[index].type !== 'empty') {
                    // Geri satÄ±ÅŸ (YarÄ± fiyatÄ±na)
                    let refund = 0; 
                    // Basit tutmak iÃ§in refund eklemedim ama eklenebilir
                    cell.innerHTML = '';
                    cell.classList.remove('occupied');
                    cell.style.backgroundColor = '#ecf0f1';
                    
                    // Ä°statistikleri dÃ¼ÅŸÃ¼r
                    if (mapData[index].type === 'seat') maxCustomers--;
                    if (mapData[index].type === 'kitchen') popularity -= items[mapData[index].content].income;
                    
                    mapData[index] = { type: 'empty', content: null };
                    updateUI();
                }
                return;
            }

            // SatÄ±n alma ve yerleÅŸtirme
            if (mapData[index].type === 'empty') {
                if (money >= selectedItem.price) {
                    money -= selectedItem.price;
                    
                    // GÃ¶rseli yerleÅŸtir
                    cell.innerHTML = selectedItem.icon;
                    cell.classList.add('occupied');
                    
                    // Veriyi kaydet
                    let itemType = items[selectedItem.key].type;
                    mapData[index] = { type: itemType, content: selectedItem.key };

                    // Ã–zellikleri gÃ¼ncelle
                    if (itemType === 'seat') maxCustomers++;
                    if (itemType === 'kitchen' || itemType === 'passive') popularity += selectedItem.income;

                    updateUI();
                } else {
                    alert("Yetersiz Bakiye!");
                }
            } else {
                alert("BurasÄ± dolu!");
            }
        }

        // --- Oyun DÃ¶ngÃ¼sÃ¼ (Loop) ---
        setInterval(() => {
            // 1. MÃ¼ÅŸteri Gelme MantÄ±ÄŸÄ±
            // EÄŸer boÅŸ masa varsa ve popÃ¼lerlik > 0 ise mÃ¼ÅŸteri gelir
            let currentSeats = document.querySelectorAll('.cell');
            let seatedCustomers = 0; // Basit simÃ¼lasyon iÃ§in
            
            // Masalara rastgele mÃ¼ÅŸteri oturt (GÃ¶rsel efekt)
            mapData.forEach((data, idx) => {
                if (data.type === 'seat') {
                    let cell = currentSeats[idx];
                    // Basit olasÄ±lÄ±k: PopÃ¼lerlik arttÄ±kÃ§a masa dolma ihtimali artar
                    let chance = Math.random() * 100;
                    
                    if (chance < popularity + 10) {
                        // Masa dolu gÃ¶rÃ¼nÃ¼mÃ¼ (BasitÃ§e opacity deÄŸiÅŸimi veya icon deÄŸiÅŸimi yapÄ±labilir)
                        // Åimdilik sadece parayÄ± hesaplayalÄ±m.
                        if (!cell.innerHTML.includes('ğŸ‘¤')) {
                             // MÃ¼ÅŸteri oturdu
                             // cell.innerHTML += '<span class="customer">ğŸ‘¤</span>'; // Ä°kon karmaÅŸasÄ± olmasÄ±n diye kapalÄ±
                        }
                        seatedCustomers++;
                    }
                }
            });

            customerCount = seatedCustomers;

            // 2. Para Kazanma MantÄ±ÄŸÄ±
            // Her dolu masa ve her mutfak aleti para Ã¼retir
            let income = 0;
            
            // Mutfak aletleri pasif gelir saÄŸlar (SipariÅŸ hÄ±zÄ± gibi dÃ¼ÅŸÃ¼n)
            // Masalar mÃ¼ÅŸteri kapasitesini, Mutfak ise geliri belirler
            if (customerCount > 0) {
                // Temel gelir + PopÃ¼lerlik geliri
                let baseIncome = customerCount * 2; // MÃ¼ÅŸteri baÅŸÄ±na 2 TL
                // Mutfak ekipmanÄ± bonusu
                income = baseIncome + (popularity / 5); 
            }
            
            // Otomatlar her zaman az da olsa para kazandÄ±rÄ±r
            mapData.forEach(data => {
                if (data.content === 'vending') income += 5;
            });

            money += income;
            updateUI();

        }, 2000); // Her 2 saniyede bir gÃ¼ncellenir

        function updateUI() {
            document.getElementById('money').innerText = Math.floor(money);
            document.getElementById('customers').innerText = customerCount + " / " + maxCustomers;
            document.getElementById('popularity').innerText = popularity;
        }

    </script>
</body>
  </html>
  
